import{b as j}from"./chunk-4WQS7HYD.js";import{a as U}from"./chunk-36OP2RTB.js";import{a as A,c as B,e as N,k as R}from"./chunk-YOXO25BK.js";import{U as L}from"./chunk-HRFT26DT.js";import{$ as v,Aa as w,Ba as y,C as _,Ca as k,G as l,Ga as S,H as p,Ha as E,Sa as T,Va as I,Wa as V,Y as g,Ya as Y,ba as D,ja as f,ka as M,la as b,oa as O,pa as s,q as C,qa as r,ra as P,sa as u,t as x,ta as m,ua as a,v as h,xa as d}from"./chunk-Q5M72QWD.js";function F(i,e){if(i&1){let t=u();s(0,"div",3)(1,"button",5),m("click",function(){l(t);let n=a(2),c=a();return p(c.startEdit(n.description))}),d(2,"Edit description"),r(),s(3,"button",6),m("click",function(){l(t);let n=a(2),c=a();return p(c.onDelete(n.id))}),d(4,"Delete"),r()()}}function $(i,e){if(i&1){let t=u();s(0,"div",4)(1,"label",7),d(2,"Edit description"),r(),s(3,"textarea",8),k("ngModelChange",function(n){l(t);let c=a(3);return y(c.draftDescription,n)||(c.draftDescription=n),p(n)}),r(),s(4,"div",9)(5,"button",10),m("click",function(){l(t);let n=a(3);return p(n.cancelEdit())}),d(6,"Cancel"),r(),s(7,"button",11),m("click",function(){l(t);let n=a(2),c=a();return p(c.saveDescription(n.id))}),d(8,"Save"),r()()()}if(i&2){let t=a(3);g(3),w("ngModel",t.draftDescription)}}function z(i,e){if(i&1&&f(0,F,5,0,"div",3)(1,$,9,1,"div",4),i&2){let t=a(2);b(t.editing?1:0)}}function q(i,e){if(i&1&&(P(0,"app-destination-item",2),f(1,z,2,1)),i&2){let t,o=e,n=a();O("destination",o)("showDetailsLink",!1),g(),b((o==null?null:o.authorId)===((t=n.profile())==null?null:t.uid)?1:-1)}}function G(i,e){i&1&&(s(0,"p",1),d(1,"Loading..."),r())}var W=class i{constructor(e){this.title=e}ngOnInit(){this.title.setTitle("Details")}route=_(V);destinationService=_(U);router=_(Y);auth=_(L);profile=this.auth.profileSignal;destination$=this.route.paramMap.pipe(C(e=>e.get("id")),x(e=>!!e),h(e=>this.destinationService.getDestinationById(e)));editing=!1;draftDescription="";startEdit(e){this.draftDescription=e??"",this.editing=!0}cancelEdit(){this.editing=!1}saveDescription(e){if(!e)return;let t=this.draftDescription.trim();t&&this.destinationService.updateDescription$(e,t).subscribe({next:()=>{this.editing=!1},error:o=>alert("Update failed: "+(o?.message??"Unknown error"))})}onDelete(e){e&&confirm("Delete this destination? This can not be undone!")&&this.destinationService.deleteDestination$(e).subscribe({next:()=>this.router.navigate(["/destinations"]),error:t=>alert("Delete failed: "+(t?.message??"Unknown error"))})}static \u0275fac=function(t){return new(t||i)(v(I))};static \u0275cmp=D({type:i,selectors:[["app-destination-details"]],decls:6,vars:3,consts:[[1,"details-container"],[1,"muted"],["variant","detail",3,"destination","showDetailsLink"],[1,"owner-actions"],[1,"edit-box"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","danger",3,"click"],["for","descEdit"],["id","descEdit","rows","6",3,"ngModelChange","ngModel"],[1,"actions"],["type","button",1,"btn","btn-neutral",3,"click"],["type","button",1,"btn","btn-accent",3,"click"]],template:function(t,o){if(t&1&&(s(0,"div",0)(1,"h4"),d(2,"Details"),r(),f(3,q,2,3),S(4,"async"),M(5,G,2,0,"p",1),r()),t&2){let n;g(3),b((n=E(4,1,o.destination$))?3:5,n)}},dependencies:[j,T,R,A,B,N],styles:['[_ngcontent-%COMP%]:root{--bg-card:#0d1117;--bg-elev:#161b22;--border:#30363d;--text:#c9d1d9;--muted:#8b949e;--accent:#58a6ff}[_nghost-%COMP%]{display:block;animation:_ngcontent-%COMP%_detailsIn .35s ease-out both;will-change:opacity,transform}.details-container[_ngcontent-%COMP%]{max-width:min(1100px,92vw);margin:0 auto;padding:0 1rem;border:none}.details-container[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:clamp(1.1rem,.7vw + 1rem,1.4rem);font-weight:700;letter-spacing:.2px;line-height:1.15;color:transparent;background:linear-gradient(180deg,#e8f1ff,#b6d8ff 65%,#7fb6ff);-webkit-background-clip:text;background-clip:text;animation:_ngcontent-%COMP%_titleUp .4s ease-out both}.details-container[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]:after{content:"";display:block;width:clamp(56px,7vw,86px);height:3px;margin:.45rem 0 0;border-radius:3px;background:linear-gradient(90deg,var(--accent),transparent);opacity:.95}.details-container[_ngcontent-%COMP%]   :where(app-destination-item[_ngcontent-%COMP%]){opacity:0;transform:translateY(8px) scale(.99);animation:_ngcontent-%COMP%_cardIn .42s ease-out .04s both;will-change:opacity,transform}.owner-actions[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;gap:.5rem;justify-content:flex-end}.edit-box[_ngcontent-%COMP%]{margin-top:.9rem;padding:.9rem;border:1px solid var(--border);border-radius:10px;background:var(--bg-elev);animation:_ngcontent-%COMP%_cardIn .38s ease-out .06s both}.edit-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.35rem;color:var(--muted);font-weight:600}.edit-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border);background:var(--bg-card);color:var(--text);border-radius:8px;padding:.6rem .7rem;outline:none}.edit-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#3d444d;box-shadow:0 0 0 2px #58a6ff26}.edit-box[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end;margin-top:.6rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.45rem .8rem;border-radius:999px;border:1px solid var(--border);background:var(--bg-elev);color:var(--text);text-decoration:none;font-weight:600;transition:background .2s,border-color .2s,transform .02s,filter .2s}.btn[_ngcontent-%COMP%]:hover:not(.btn-accent):not([disabled]){border-color:#3d444d;background:#11161a;transform:translateY(-1px)}.btn-accent[_ngcontent-%COMP%]{background:var(--accent);color:#0b1220;border-color:transparent;box-shadow:0 6px 16px #58a6ff38}.btn-accent[_ngcontent-%COMP%]:hover{filter:brightness(1.06);background:var(--accent);border-color:transparent;transform:translateY(-1px)}.btn[disabled][_ngcontent-%COMP%], .btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed;transform:none;filter:none;background:#131a23;border-color:#2a3342;color:#93a4b7;opacity:.9}.btn-accent[disabled][_ngcontent-%COMP%], .btn-accent[disabled][_ngcontent-%COMP%]:hover{background:#234170;border-color:#3a5ea3;color:#d9e7ff;box-shadow:none;cursor:not-allowed;transform:none;filter:none}.btn.danger[_ngcontent-%COMP%]{background:#2b0f14;border-color:#712b2f;color:#ffb4b4}.btn.danger[_ngcontent-%COMP%]:hover:not([disabled]){background:#3a1419;border-color:#8b373c}.muted[_ngcontent-%COMP%]{color:var(--muted)}@keyframes _ngcontent-%COMP%_detailsIn{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_titleUp{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_cardIn{0%{opacity:0;transform:translateY(8px) scale(.99);filter:saturate(.95)}to{opacity:1;transform:translateY(0) scale(1);filter:saturate(1)}}@media (prefers-reduced-motion: reduce){[_nghost-%COMP%], .details-container[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], .details-container[_ngcontent-%COMP%]   :where(app-destination-item[_ngcontent-%COMP%]), .edit-box[_ngcontent-%COMP%]{animation:none!important;transform:none!important;opacity:1!important}}']})};export{W as DestinationDetails};
