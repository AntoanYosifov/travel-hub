import{a as x}from"./chunk-CZFHG23L.js";import{a as O,b as s,c as N,d as w,f as S,g as y,i as D,j as E,l as I}from"./chunk-WY3CXWCY.js";import{U as P}from"./chunk-NJQ2NFC2.js";import{Ma as M,Pa as b,U as o,W as c,X as v,da as p,fa as g,ia as u,ja as i,ka as t,la as l,na as _,oa as f,pa as h,qa as r,ra as C}from"./chunk-6PUXLSNH.js";function F(a,d){if(a&1&&(i(0,"p",7),r(1),t()),a&2){let e=f();o(),C(e.locationNameErrorMessage)}}function U(a,d){if(a&1&&(i(0,"p",7),r(1),t()),a&2){let e=f();o(),C(e.descriptionErrorMessage)}}var A=class a{constructor(d,e,n,m,V){this.formBuilder=d;this.destinationService=e;this.router=n;this.authService=m;this.title=V;this.profile=this.authService.profileSignal,this.form=this.formBuilder.group({locationName:["",[s.required,s.minLength(4)]],description:["",[s.required,s.minLength(10)]],imgUrl:["",s.required],photoCredit:[""]})}form;profile;ngOnInit(){this.title.setTitle("New Destination")}get locationName(){return this.form.get("locationName")}get description(){return this.form.get("description")}get isLocationNameNotValid(){return this.locationName?.invalid&&(this.locationName?.dirty||this.locationName?.touched)||!1}get isDescriptionNotValid(){return this.description?.invalid&&(this.description?.dirty||this.description?.touched)||!1}get locationNameErrorMessage(){return this.locationName?.errors?.required?"Location name is required!":this.locationName?.errors?.minlength?"Minimum of 4 characters!":""}get descriptionErrorMessage(){return this.description?.errors?.required?"Description is required!":this.description?.errors?.minlength?"Minimum of 10 characters!":""}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}let d=this.profile();if(!d){console.error("No logged-in user");return}let e=this.form.getRawValue(),n={locationName:e.locationName,description:e.description,imgUrl:e.imgUrl,photoCredit:e.photoCredit,authorId:d.uid,authorName:d.displayName};this.destinationService.addDestination(n).subscribe({next:m=>{this.router.navigate(["/destinations"])},error:m=>{console.error("Failed to add destination",m)}})}static \u0275fac=function(e){return new(e||a)(c(E),c(x),c(b),c(P),c(M))};static \u0275cmp=v({type:a,selectors:[["app-new-destination"]],decls:26,vars:8,consts:[[1,"new-destination","card","outer-container","form-card"],[1,"inner-container"],[1,"form-title"],[1,"form-grid",3,"ngSubmit","formGroup"],[1,"form-group"],["for","locationName"],["type","text","id","locationName","formControlName","locationName","placeholder","e.g. Paris"],[1,"error"],[1,"form-group","span-2"],["for","description"],["id","description","formControlName","description","placeholder","Say something about this place...","rows","6"],["for","imgUrl"],["type","url","id","imgUrl","formControlName","imgUrl","placeholder","https://example.com/photo.jpg"],["for","photoCredit"],["type","text","id","photoCredit","formControlName","photoCredit","placeholder","\xA9 Photographer Name"],[1,"actions"],["type","submit",1,"btn-accent",3,"disabled"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h4",2),r(3,"Add New Destination"),t(),i(4,"form",3),_("ngSubmit",function(){return n.onSubmit()}),i(5,"div",4)(6,"label",5),r(7,"Location Name"),t(),l(8,"input",6),p(9,F,2,1,"p",7),t(),i(10,"div",8)(11,"label",9),r(12,"Describe your exp..."),t(),l(13,"textarea",10),p(14,U,2,1,"p",7),t(),i(15,"div",4)(16,"label",11),r(17,"Image URL"),t(),l(18,"input",12),t(),i(19,"div",4)(20,"label",13),r(21,"Photo Credit"),t(),l(22,"input",14),t(),i(23,"div",15)(24,"button",16),r(25," Save Destination "),t()()()()()),e&2&&(o(4),u("formGroup",n.form),o(4),h("input-error",n.isLocationNameNotValid),o(),g(n.isLocationNameNotValid?9:-1),o(4),h("input-error",n.isDescriptionNotValid),o(),g(n.isDescriptionNotValid?14:-1),o(10),u("disabled",n.form.invalid))},dependencies:[I,S,O,N,w,y,D],styles:['[_ngcontent-%COMP%]:root{--bg-card:#0d1117;--bg-elev:#161b22;--border:#30363d;--text:#c9d1d9;--muted:#8b949e;--accent:#58a6ff;--accent-2:#1f6feb;--danger:#f85149}.new-destination.outer-container[_ngcontent-%COMP%]{margin:0 auto;max-width:min(760px,96vw);padding:2rem 1rem 3rem;display:flex;justify-content:center}.new-destination.form-card[_ngcontent-%COMP%]{width:100%;background:var(--bg-card);border:1px solid var(--border);border-radius:16px;box-shadow:0 12px 32px #00000059;overflow:hidden}.new-destination[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{padding:1.25rem}.new-destination[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:clamp(1.2rem,.8vw + 1rem,1.6rem);color:var(--text);position:relative}.new-destination[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;width:72px;margin-top:.5rem;background:linear-gradient(90deg,var(--accent),transparent);border-radius:2px}.new-destination[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.45rem}.new-destination[_ngcontent-%COMP%]   .span-2[_ngcontent-%COMP%]{grid-column:1 / -1}.new-destination[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text);font-size:.9rem}.new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:var(--bg-elev);color:var(--text);border:1px solid var(--border);border-radius:12px;padding:.65rem .75rem;outline:none;transition:border-color .2s,box-shadow .2s}.new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--muted)}.new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #58a6ff26}.new-destination[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:140px}.new-destination[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{border-color:var(--danger)!important}.new-destination[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--danger);font-weight:600;font-size:.85rem}.new-destination[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:flex-end;margin-top:.25rem}.new-destination[_ngcontent-%COMP%]   .btn-accent[_ngcontent-%COMP%]{background:var(--accent-2);border:1px solid #316dca;color:#fff;border-radius:12px;padding:.6rem 1rem;font-weight:600}']})};export{A as NewDestination};
