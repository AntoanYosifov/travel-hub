import{a as _,b as l,c as P,d as M,f as y,g as O,i as E,j as S,l as F}from"./chunk-WY3CXWCY.js";import{U as C}from"./chunk-NJQ2NFC2.js";import{Ma as x,Pa as w,U as i,W as d,X as b,da as c,fa as m,ia as g,ja as o,ka as n,la as f,na as v,oa as u,pa as h,qa as a,ra as p}from"./chunk-6PUXLSNH.js";function A(r,s){if(r&1&&(o(0,"p",7),a(1),n()),r&2){let e=u();i(),p(e.emailErrorMessage)}}function I(r,s){if(r&1&&(o(0,"p",7),a(1),n()),r&2){let e=u();i(),p(e.passwordErrorMessage)}}function T(r,s){if(r&1&&(o(0,"div",4)(1,"p",7),a(2),n()()),r&2){let e=u();i(2),p(e.error)}}var N=class r{constructor(s,e,t,L){this.authService=s;this.router=e;this.formBuilder=t;this.title=L;this.loginForm=this.formBuilder.group({email:["",[l.required,l.pattern(/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/)]],password:["",[l.required,l.minLength(6),l.pattern(/^[a-zA-Z0-9]+$/)]]})}loginForm;error=null;firebaseErrorMessages={"auth/invalid-email":"Please enter a valid email address.","auth/invalid-credential":"Incorrect email or password. Please try again.","auth/too-many-requests":"Too many failed attempts. Please try again later."};ngOnInit(){this.title.setTitle("Login")}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}get isEmailNotValid(){return this.email?.invalid&&(this.email?.dirty||this.email?.touched)||!1}get isPasswordNotValid(){return this.password?.invalid&&(this.password?.dirty||this.password?.touched)||!1}get emailErrorMessage(){return this.email?.errors?.required?"Email is required":this.email?.errors?.pattern?"Email is not valid":""}get passwordErrorMessage(){return this.password?.errors?.required?"Password is required":this.password?.errors?.minlength?"Password must be at least 6 characters!":this.password?.errors?.pattern?"Password must contain only Latin letters and numbers (no spaces or special characters).!":""}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{email:s,password:e}=this.loginForm.value;this.authService.login$(s,e).subscribe({next:()=>{this.router.navigate(["/"])},error:t=>{this.error=t.message??"Login failed",console.error(this.error),this.error=this.firebaseErrorMessages[t.code]||"Login failed. Please try again.",this.password?.reset()}})}static \u0275fac=function(e){return new(e||r)(d(C),d(w),d(S),d(x))};static \u0275cmp=b({type:r,selectors:[["app-login"]],decls:18,vars:9,consts:[[1,"card","outer-container","auth-card"],[1,"inner-container"],[1,"auth-title"],[1,"form-stack",3,"ngSubmit","formGroup"],[1,"form-row"],["for","email"],["id","email","type","email","formControlName","email","placeholder","you@example.com"],[1,"error"],["for","password"],["id","password","type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn-accent",3,"disabled"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"h4",2),a(3,"Login"),n(),o(4,"form",3),v("ngSubmit",function(){return t.onSubmit()}),o(5,"div",4)(6,"label",5),a(7,"Email"),n(),f(8,"input",6),c(9,A,2,1,"p",7),n(),o(10,"div",4)(11,"label",8),a(12,"Password"),n(),f(13,"input",9),c(14,I,2,1,"p",7),n(),c(15,T,3,1,"div",4),o(16,"button",10),a(17," Login "),n()()()()),e&2&&(i(4),g("formGroup",t.loginForm),i(4),h("input-error",t.isEmailNotValid),i(),m(t.isEmailNotValid?9:-1),i(4),h("input-error",t.isPasswordNotValid),i(),m(t.isPasswordNotValid?14:-1),i(),m(t.error?15:-1),i(),g("disabled",t.loginForm.invalid))},dependencies:[F,y,_,P,M,O,E],styles:['[_ngcontent-%COMP%]:root{--bg-card:#0d1117;--bg-elev:#161b22;--border:#30363d;--text:#c9d1d9;--muted:#8b949e;--accent:#58a6ff;--accent-2:#7cc4ff}.outer-container[_ngcontent-%COMP%]{margin:0 auto;max-width:min(520px,94vw);padding:2rem 1rem 3rem;display:flex;justify-content:center}.auth-card[_ngcontent-%COMP%]{width:100%;background:var(--bg-card);border:1px solid var(--border);border-radius:14px;box-shadow:0 12px 32px #00000059}.inner-container[_ngcontent-%COMP%]{padding:1.5rem}.auth-title[_ngcontent-%COMP%]{margin:0 0 1.25rem;color:var(--text);font-size:clamp(1.1rem,.8vw + 1rem,1.6rem);position:relative}.auth-title[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;width:72px;margin-top:.5rem;background:linear-gradient(90deg,var(--accent),transparent);border-radius:2px}.form-stack[_ngcontent-%COMP%]{display:grid;gap:1rem}.form-row[_ngcontent-%COMP%]{display:grid;gap:.5rem}label[_ngcontent-%COMP%]{color:var(--muted);font-weight:600}input[_ngcontent-%COMP%]{width:100%;height:42px;padding:0 .85rem;color:var(--text);background:var(--bg-elev);border:1px solid var(--border);border-radius:10px;outline:none;transition:border-color .15s ease,box-shadow .15s ease}input[_ngcontent-%COMP%]::placeholder{color:#7a8390}input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #58a6ff2e}.input-error[_ngcontent-%COMP%]{border-color:#f85149!important;box-shadow:0 0 0 3px #f8514926}.error[_ngcontent-%COMP%]{margin:0;color:#f85149;font-weight:600;font-size:.9rem}.auth-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;height:44px;margin-top:.5rem;border-radius:10px;font-weight:600;letter-spacing:.2px;border:1px solid var(--accent-2, #467ecf);background:linear-gradient(180deg,var(--accent, #58a6ff),var(--accent-2, #467ecf));color:#0b1220;box-shadow:0 6px 16px #58a6ff40;transition:transform .06s ease,filter .15s ease}.auth-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{filter:brightness(1.06)}.auth-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(1px)}.auth-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 3px #58a6ff59}.auth-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background:#1b2430;border-color:#41536a;color:#cdd9e5;opacity:1;box-shadow:inset 0 1px #ffffff08,0 0 #0000;cursor:not-allowed;filter:none}.inner-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-bottom:0}']})};export{N as Login};
