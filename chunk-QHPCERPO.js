import{a as _,b as d,c as M,d as N,f as E,g as F,h as O,i as S,j as A,k as R,l as V}from"./chunk-WY3CXWCY.js";import{U as P}from"./chunk-NJQ2NFC2.js";import{Ma as x,Pa as C,U as i,W as u,X as b,da as l,fa as m,ia as w,ja as s,ka as o,la as g,na as y,oa as c,pa as f,qa as n,ra as p}from"./chunk-6PUXLSNH.js";function T(r,a){if(r&1&&(s(0,"p",7),n(1),o()),r&2){let e=c();i(),p(e.displayNameErrorMessage)}}function q(r,a){if(r&1&&(s(0,"p",7),n(1),o()),r&2){let e=c();i(),p(e.emailErrorMessage)}}function D(r,a){if(r&1&&(s(0,"p",7),n(1),o()),r&2){let e=c();i(),p(e.passwordErrorMessage)}}function G(r,a){if(r&1&&(s(0,"p",7),n(1),o()),r&2){let e=c();i(),p(e.rePasswordErrorMessage)}}function z(r,a){if(r&1&&(s(0,"p",15),n(1),o()),r&2){let e=c();i(),p(e.passwordsMismatchErrorMessage)}}function k(r,a){if(r&1&&(s(0,"div",16)(1,"p",7),n(2),o()()),r&2){let e=c();i(2),p(e.error)}}var I=class r{constructor(a,e,t,h){this.authService=a;this.router=e;this.formBuilder=t;this.title=h;this.registerForm=this.formBuilder.group({displayName:["",[d.required,d.minLength(5)]],email:["",[d.required,d.pattern(/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/)]],passwords:this.formBuilder.group({password:["",[d.required,d.minLength(6),d.pattern(/^[a-zA-Z0-9]+$/)]],rePassword:["",[d.required,d.minLength(6),d.pattern(/^[a-zA-Z0-9]+$/)]]},{validators:this.passwordMatchValidator})})}firebaseErrorMessages={"auth/email-already-in-use":"An account with this email already exists.","auth/invalid-email":"Please enter a valid email address.","auth/weak-password":"Password should be at least 6 characters."};registerForm;error=null;ngOnInit(){this.title.setTitle("Register")}get displayName(){return this.registerForm.get("displayName")}get email(){return this.registerForm.get("email")}get passwords(){return this.registerForm.get("passwords")}get password(){return this.passwords.get("password")}get rePassword(){return this.passwords.get("rePassword")}get isDisplayNameNotValid(){return this.displayName?.invalid&&(this.displayName?.dirty||this.displayName?.touched)||!1}get isEmailNotValid(){return this.email?.invalid&&(this.email?.dirty||this.email?.touched)||!1}get isPasswordsNotValid(){return this.passwords?.invalid&&(this.passwords?.dirty||this.passwords?.touched)||!1}get isPasswordsMismatch(){let a=this.passwords.errors?.passwordMismatch,e=this.rePassword?.dirty||this.rePassword?.touched;return!!(a&&e)}get displayNameErrorMessage(){return this.displayName?.errors?.required?"Display Name is required!":this.displayName?.errors?.minlength?"Minimum of 5 characters!":""}get emailErrorMessage(){return this.email?.errors?.required?"Email is required":this.email?.errors?.pattern?"Email is not valid":""}get passwordErrorMessage(){return this.password?.errors?.required?"Password is required":this.password?.errors?.minlength?"Password must be at least 6 characters!":this.password?.errors?.pattern?"Password must contain only Latin letters and numbers (no spaces or special characters).":""}get rePasswordErrorMessage(){return this.rePassword?.errors?.required?"You must confirm your password!":this.rePassword?.errors?.minlength?"Password must be at least 6 characters!":this.rePassword?.errors?.pattern?"Password must contain only Latin letters and numbers (no spaces or special characters).":""}get passwordsMismatchErrorMessage(){return"Passwords do not match!"}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{displayName:a,email:e,passwords:t}=this.registerForm.value,h=t.password;this.authService.register$(a,e,h).subscribe({next:()=>{this.router.navigate(["/"])},error:v=>{this.error=v.message??"Failed to register",console.error(this.error),this.error=this.firebaseErrorMessages[v.code]||"Failed to register!",this.passwords.reset()}})}passwordMatchValidator(a){let e=a.get("password"),t=a.get("rePassword");return e&&t&&e.value!==t.value?{passwordMismatch:!0}:null}static \u0275fac=function(e){return new(e||r)(u(P),u(C),u(A),u(x))};static \u0275cmp=b({type:r,selectors:[["app-register"]],decls:35,vars:14,consts:[[1,"card","outer-container","form-card"],[1,"inner-container"],[1,"form-title"],[1,"form-grid",3,"ngSubmit","formGroup"],[1,"field"],["for","displayName"],["id","displayName","formControlName","displayName",1,"control"],[1,"error"],["for","email"],["id","email","formControlName","email","type","email",1,"control"],["formGroupName","passwords",1,"row-2"],["for","password"],["id","password","formControlName","password","type","password","placeholder","******",1,"control"],["for","rePassword"],["id","rePassword","formControlName","rePassword","type","password","placeholder","******",1,"control"],[1,"error","span-2"],[1,"form-row"],[1,"actions"],["type","submit",1,"btn-primary",3,"disabled"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"h4",2),n(3,"Registration"),o(),s(4,"form",3),y("ngSubmit",function(){return t.onSubmit()}),s(5,"div",4)(6,"label",5),n(7,"Display Name"),o(),g(8,"br")(9,"input",6),l(10,T,2,1,"p",7),o(),s(11,"div",4)(12,"label",8),n(13,"Email"),o(),g(14,"br")(15,"input",9),l(16,q,2,1,"p",7),o(),s(17,"div",10)(18,"div",4)(19,"label",11),n(20,"Password"),o(),g(21,"br")(22,"input",12),l(23,D,2,1,"p",7),o(),s(24,"div",4)(25,"label",13),n(26,"Confirm Password"),o(),g(27,"br")(28,"input",14),l(29,G,2,1,"p",7),o(),l(30,z,2,1,"p",15),o(),l(31,k,3,1,"div",16),s(32,"div",17)(33,"button",18),n(34," Create Account "),o()()()()()),e&2&&(i(4),w("formGroup",t.registerForm),i(5),f("input-error",t.isDisplayNameNotValid),i(),m(t.isDisplayNameNotValid?10:-1),i(5),f("input-error",t.isEmailNotValid),i(),m(t.isEmailNotValid?16:-1),i(6),f("input-error",t.isPasswordsNotValid),i(),m(t.isPasswordsNotValid?23:-1),i(6),m(t.isPasswordsNotValid?29:-1),i(),m(t.isPasswordsMismatch?30:-1),i(),m(t.error?31:-1),i(2),w("disabled",t.registerForm.invalid))},dependencies:[V,E,_,M,N,F,S,O,R],styles:["[_ngcontent-%COMP%]:root{--bg-card:#0d1117;--bg-elev:#161b22;--border:#30363d;--text:#c9d1d9;--muted:#8b949e;--accent:#58a6ff;--danger:#f85149;--success:#238636;--success-2:#2ea043}.outer-container[_ngcontent-%COMP%]{margin:0 auto;max-width:min(760px,96vw);padding:2rem 1rem 3rem;display:flex;justify-content:center}.form-card[_ngcontent-%COMP%]{width:100%;background:var(--bg-card);border:1px solid var(--border);border-radius:14px;box-shadow:0 12px 32px #00000059}.inner-container[_ngcontent-%COMP%]{padding:1.25rem}.form-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:clamp(1.2rem,.8vw + 1rem,1.6rem);color:var(--text)}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.row-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;grid-column:1 / -1}.span-2[_ngcontent-%COMP%]{grid-column:1 / -1}label[_ngcontent-%COMP%]{color:var(--text);font-size:.9rem}.control[_ngcontent-%COMP%]{background:var(--bg-elev);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:.65rem .75rem;outline:none;transition:border-color .2s,box-shadow .2s}.control[_ngcontent-%COMP%]::placeholder{color:var(--muted)}.control[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #58a6ff26}.input-error[_ngcontent-%COMP%]{border-color:var(--danger)!important}.error[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--danger);font-weight:600;font-size:.85rem}.actions[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:flex-end;margin-top:.25rem}.btn-primary[_ngcontent-%COMP%]{background:var(--success);border:1px solid var(--success-2);color:#fff;border-radius:10px;padding:.6rem 1rem;font-weight:600;transition:background .15s,border-color .15s,transform .05s}.btn-primary[_ngcontent-%COMP%]:hover:enabled{background:var(--success-2);border-color:#3fb950}.btn-primary[_ngcontent-%COMP%]:active:enabled{transform:translateY(1px)}.btn-primary[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}@media (max-width: 720px){.form-grid[_ngcontent-%COMP%], .row-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{I as Register};
